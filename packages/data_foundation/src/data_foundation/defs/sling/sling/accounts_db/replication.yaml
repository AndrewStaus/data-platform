# Sling connection profile for the Accounts database source. Platform engineers
# control network credentials here, while data engineers can inspect the
# replication defaults to understand how raw tables land in Snowflake.
# https://docs.slingdata.io/concepts/replication

# yaml-language-server: $schema=../.schema/replication.json
name: accounts_db->snowflake
env: {SLING_LOADED_AT_COLUMN: timestamp}
source: accounts_db
target: snowflake
streams:
    accounts_db.accounts:
        mode: incremental
        object: '{stream_schema_upper}.{stream_table_upper}'
        primary_key: [id]
        update_key: updated_at
        target_options:
            column_casing: snake
            add_new_columns: true
            adjust_column_type: true
        meta:
            dagster:
                automation_condition: "on_schedule"
                tags: ["contains_pii"]
                automation_condition_config: "cron_schedule":"@daily", "cron_timezone":"utc"}