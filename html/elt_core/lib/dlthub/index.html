<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>elt_core.lib.dlthub API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>elt_core.lib.dlthub</code></h1>
</header>
<section id="section-intro">
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="elt_core.lib.dlthub.translator" href="translator.html">elt_core.lib.dlthub.translator</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="elt_core.lib.dlthub.ConfigurableDltResource"><code class="flex name class">
<span>class <span class="ident">ConfigurableDltResource</span></span>
<span>(</span><span>pipe: dlt.extract.pipe.Pipe,<br>hints: dlt.extract.hints.TResourceHints,<br>selected: bool,<br>*,<br>section: str = None,<br>args_bound: bool = False)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConfigurableDltResource(DltResource):
    &#34;&#34;&#34;Wrapper class to add aditional attributes to the
    DltResource class.  These attributes are used in the factory
    to add aditional configuration such as automation conditions,
    asset checks, tags, and upstream external assets.
    &#34;&#34;&#34;
    meta: dict | None
    tags: list | None
    kinds: set | None

    @staticmethod
    def config(resource: DltResource,
            meta:dict|None=None,
            tags:list[str]|None = None,
            kinds:set[str]|None=None) -&gt; &#34;ConfigurableDltResource&#34;:
        &#34;&#34;&#34;Returns a ConfigurableDltResource wrapped DltResource with aditional
        attributes used by the factory to generate enhanced definitions.
        &#34;&#34;&#34;
        
        resource = ConfigurableDltResource._convert(resource, meta, tags, kinds)
        return resource # type: ignore

    @staticmethod
    def _convert(
            dlt_resource: DltResource,
            meta: dict | None,
            tags: list[str] | None,
            kinds: set[str] | None) -&gt; &#34;ConfigurableDltResource&#34;:
        &#34;&#34;&#34;Helper method to wrap a DltResource&#34;&#34;&#34;
        
        dlt_resource.tags = tags # type: ignore
        dlt_resource.meta = meta # type: ignore
        dlt_resource.kinds = kinds # type: ignore
        return dlt_resource # type: ignore</code></pre>
</details>
<div class="desc"><p>Wrapper class to add aditional attributes to the
DltResource class.
These attributes are used in the factory
to add aditional configuration such as automation conditions,
asset checks, tags, and upstream external assets.</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li>dlt.extract.resource.DltResource</li>
<li>collections.abc.Iterable</li>
<li>typing.Generic</li>
<li>dlt.extract.hints.DltResourceHints</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="elt_core.lib.dlthub.ConfigurableDltResource.kinds"><code class="name">var <span class="ident">kinds</span> : set | None</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="elt_core.lib.dlthub.ConfigurableDltResource.meta"><code class="name">var <span class="ident">meta</span> : dict | None</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="elt_core.lib.dlthub.ConfigurableDltResource.tags"><code class="name">var <span class="ident">tags</span> : list | None</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="elt_core.lib.dlthub.ConfigurableDltResource.config"><code class="name flex">
<span>def <span class="ident">config</span></span>(<span>resource: dlt.extract.resource.DltResource,<br>meta: dict | None = None,<br>tags: list[str] | None = None,<br>kinds: set[str] | None = None) ‑> <a title="elt_core.lib.dlthub.ConfigurableDltResource" href="#elt_core.lib.dlthub.ConfigurableDltResource">ConfigurableDltResource</a></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def config(resource: DltResource,
        meta:dict|None=None,
        tags:list[str]|None = None,
        kinds:set[str]|None=None) -&gt; &#34;ConfigurableDltResource&#34;:
    &#34;&#34;&#34;Returns a ConfigurableDltResource wrapped DltResource with aditional
    attributes used by the factory to generate enhanced definitions.
    &#34;&#34;&#34;
    
    resource = ConfigurableDltResource._convert(resource, meta, tags, kinds)
    return resource # type: ignore</code></pre>
</details>
<div class="desc"><p>Returns a ConfigurableDltResource wrapped DltResource with aditional
attributes used by the factory to generate enhanced definitions.</p></div>
</dd>
</dl>
</dd>
<dt id="elt_core.lib.dlthub.DagsterDltFactory"><code class="flex name class">
<span>class <span class="ident">DagsterDltFactory</span></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DagsterDltFactory:
    @cache
    @staticmethod
    def build_definitions(resources: list[ConfigurableDltResource]) -&gt; dg.Definitions:

        assets_definitions = []
        freshness_checks = []
        for resource in resources:
            assets = DagsterDltFactory._build_assets(resource)
            assets_definitions.extend(assets)

            if last_update_freshness_check := DagsterDltFactory._build_freshness_checks(resource):
                freshness_checks.extend(last_update_freshness_check)

        return dg.Definitions(
            assets=assets_definitions,
            asset_checks=freshness_checks
        )

    @staticmethod
    def _build_assets(resource: ConfigurableDltResource) -&gt; list[dg.AssetsDefinition | dg.AssetSpec]:
            schema, table = resource.name.split(&#34;.&#34;)
            
            @dlt.source()
            def source() -&gt; Generator[DltResource, Any, None]:
                yield resource

            @dlt_assets(
                name=f&#34;{schema}__{table}&#34;,
                op_tags={&#34;tags&#34;: resource.tags},
                dlt_source=source(),
                backfill_policy=dg.BackfillPolicy.single_run(),
                dagster_dlt_translator=CustomDagsterDltTranslator(),
                dlt_pipeline=dlt.pipeline(
                    pipeline_name=f&#34;{schema}__{table}&#34;,
                    destination=&#34;snowflake&#34;,
                    dataset_name=schema,
                    progress=&#34;log&#34;,
                ),
            )
            def assets(context: dg.AssetExecutionContext, dlt: DagsterDltResource) -&gt; Generator[DltEventType, Any, None]:
                yield from dlt.run(context=context)

            # deps
            dep = dg.AssetSpec([schema, &#34;src&#34;, table], kinds=resource.kinds, group_name=schema)

            return [assets, dep]

    @staticmethod
    def _build_freshness_checks(resource: ConfigurableDltResource) -&gt; Sequence[dg.AssetChecksDefinition] | None:
        schema, table = resource.name.split(&#34;.&#34;)
        if meta := resource.meta:
            if dagster := meta.get(&#34;dagster&#34;, {}):
                if delta := dagster.get(&#34;freshness_lower_bound_delta_seconds&#34;):
                    asset_key = dg.AssetKey([schema, &#34;raw&#34;, table])
                    last_update_freshness_check = dg.build_last_update_freshness_checks(
                                assets=[asset_key],
                                lower_bound_delta=timedelta(seconds=float(delta))
                            )
                    return last_update_freshness_check</code></pre>
</details>
<div class="desc"></div>
<h3>Methods</h3>
<dl>
<dt id="elt_core.lib.dlthub.DagsterDltFactory.build_definitions"><code class="name flex">
<span>def <span class="ident">build_definitions</span></span>(<span>resources: list[<a title="elt_core.lib.dlthub.ConfigurableDltResource" href="#elt_core.lib.dlthub.ConfigurableDltResource">ConfigurableDltResource</a>]) ‑> dagster._core.definitions.definitions_class.Definitions</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@cache
@staticmethod
def build_definitions(resources: list[ConfigurableDltResource]) -&gt; dg.Definitions:

    assets_definitions = []
    freshness_checks = []
    for resource in resources:
        assets = DagsterDltFactory._build_assets(resource)
        assets_definitions.extend(assets)

        if last_update_freshness_check := DagsterDltFactory._build_freshness_checks(resource):
            freshness_checks.extend(last_update_freshness_check)

    return dg.Definitions(
        assets=assets_definitions,
        asset_checks=freshness_checks
    )</code></pre>
</details>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="elt_core.lib" href="../index.html">elt_core.lib</a></code></li>
</ul>
</li>
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="elt_core.lib.dlthub.translator" href="translator.html">elt_core.lib.dlthub.translator</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="elt_core.lib.dlthub.ConfigurableDltResource" href="#elt_core.lib.dlthub.ConfigurableDltResource">ConfigurableDltResource</a></code></h4>
<ul class="">
<li><code><a title="elt_core.lib.dlthub.ConfigurableDltResource.config" href="#elt_core.lib.dlthub.ConfigurableDltResource.config">config</a></code></li>
<li><code><a title="elt_core.lib.dlthub.ConfigurableDltResource.kinds" href="#elt_core.lib.dlthub.ConfigurableDltResource.kinds">kinds</a></code></li>
<li><code><a title="elt_core.lib.dlthub.ConfigurableDltResource.meta" href="#elt_core.lib.dlthub.ConfigurableDltResource.meta">meta</a></code></li>
<li><code><a title="elt_core.lib.dlthub.ConfigurableDltResource.tags" href="#elt_core.lib.dlthub.ConfigurableDltResource.tags">tags</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="elt_core.lib.dlthub.DagsterDltFactory" href="#elt_core.lib.dlthub.DagsterDltFactory">DagsterDltFactory</a></code></h4>
<ul class="">
<li><code><a title="elt_core.lib.dlthub.DagsterDltFactory.build_definitions" href="#elt_core.lib.dlthub.DagsterDltFactory.build_definitions">build_definitions</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
